
<!DOCTYPE HTML>
<html>
    <head>
        <title>Admin Profile</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    </head>
    <body>
            <div class="navbar navbar-default navbar-fixed-top" role="navigation">
                <div class="container">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Web Services</a>
                    </div>
                    <div class="navbar-collapse collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#">News</a></li>
                            <li><a href="#">Strategy of the Week</a></li>
                            <li><a href="#">Events</a></li>
                            <li><a href="#">Polls</a></li>
                            <li><a href="#">About</a></li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">You are logged in as Admin <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Settings</a></li>
                                    <li><a href="index.html">Logout</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="jumbotron">
                    <h2>Strategy of the Week</h2>
                    <form action="http://localhost:3000/api/strategy" method="POST">
                        <table class="table">
                            <tr>
                                <td><input type="text" placeholder="Enter Title" name="title"></td>
                                <td width="20%"><textarea placeholder="Enter Content" name="content" cols="45" rows="5"></textarea></td>
                                <td width="80%"><input type="submit" class="btn btn-primary" value="Create"></td>
                            </tr>
                        </table>
                    </form>
                    <hr>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Content</th>
                                <th>Date Created</th>
                                <th width="10%"></th>
                                <th width="10%"></th>
                            </tr>
                        </thead>
                        <tbody class="strategy">
                        </tbody>
                    </table>
                </div>
            </div>
            <script type="text/javascript">
        var stratContainer = document.querySelector('.strategy');
        var ajax = new XMLHttpRequest();
        ajax.open('GET','http://localhost:3000/api/strategy');
        ajax.onload = function(data) {
            var data = JSON.parse(data.target.response);

            data.forEach(function(d) {
                var li = document.createElement('li');
                li.innerText = d.title + ' - ' + d.content;

                stratContainer.appendChild(li);
            });
        };

        ajax.send();

        var form = document.querySelector('form');

        form.onsubmit = function (e) {
            e.preventDefault();

            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:3000/api/strategy');
            xhr.onload = function (e) {
                var data = JSON.parse(e.target.response);
                var li = document.createElement('li');
                li.innerText = data.title + ' - ' + data.content;

                strategyContainer.appendChild(li);

                form.title.value = '';
                form.content.value = '';

                form.title.focus();
            }
            xhr.setRequestHeader('content-type','application/json');

            xhr.send(JSON.stringify({
                title : form.title.value,
                content : form.content.value
            }));
        };
    </script>
    </body>
</html>